<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AURA RUST</title>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Login Screen -->
  <div class="login-screen" id="loginScreen">
    <div class="login-bg"></div>
    <div class="login-particles" id="particles"></div>
    <div class="login-card">
      <div class="login-logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
        </div>
        <h1><span class="accent">AURA</span> RUST</h1>
      </div>
      <p class="login-desc">Player Checker & Event Monitor</p>
      
      <a href="/auth/steam" class="steam-btn">
        <svg class="steam-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.08 3.16 9.42 7.63 11.18l4.01-5.7c-1.39-.16-2.47-1.34-2.47-2.78 0-1.55 1.26-2.81 2.81-2.81s2.81 1.26 2.81 2.81c0 .55-.16 1.06-.43 1.49l2.59 1.82c.71-1.01 1.13-2.24 1.13-3.56 0-3.42-2.78-6.19-6.19-6.19-.85 0-1.66.17-2.4.48L6.5 4.5C8.14 3.54 10.01 3 12 3c4.97 0 9 4.03 9 9s-4.03 9-9 9-9-4.03-9-9c0-1.99.65-3.83 1.74-5.33l2.99 2.1c-.11.39-.17.8-.17 1.23 0 2.49 2.02 4.5 4.5 4.5.62 0 1.21-.13 1.75-.35l-3.18 4.52C5.16 21.42 2 17.08 2 12 2 5.37 7.37 0 14 0h-2z"/></svg>
        <span>Sign in with Steam</span>
        <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </a>
      
      <p class="login-note">Access restricted to team members only</p>
    </div>
  </div>

  <!-- Main App -->
  <div class="app" id="mainApp" style="display:none">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
        <span><span class="accent">AURA</span> RUST</span>
      </div>
      
      <nav>
        <a href="#" class="nav-link active" data-page="checker">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <span>Checker</span>
        </a>
        <a href="#" class="nav-link" data-page="dashboard">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
          <span>Dashboard</span>
        </a>
        <a href="#" class="nav-link" data-page="map">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/></svg>
          <span>Map</span>
        </a>
        <a href="#" class="nav-link" data-page="team">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
          <span>Team</span>
        </a>
        <a href="#" class="nav-link" data-page="raid">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
          <span>Raid Calc</span>
        </a>
      </nav>
      
      <div class="user-panel" id="userPanel">
        <img src="" alt="" class="user-avatar" id="userAvatar">
        <div class="user-info">
          <div class="user-name" id="userName">Loading...</div>
          <a href="/auth/logout" class="logout-link">Выйти</a>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <!-- Checker Page -->
      <section class="page active" id="page-checker">
        <div class="page-header">
          <h1>Player Checker</h1>
          <p>Проверка игроков через Steam и BattleMetrics</p>
        </div>
        
        <div class="search-box">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input type="text" id="searchInput" placeholder="Введи ник, SteamID или ссылку на профиль...">
          <button class="search-btn" onclick="search()">Поиск</button>
        </div>
        
        <div id="searchResults"></div>
        <div id="playerInfo"></div>
        <div id="graphContainer"></div>
      </section>

      <!-- Dashboard Page -->
      <section class="page" id="page-dashboard">
        <div class="page-header">
          <h1 id="serverName">Loading...</h1>
          <div class="server-stats">
            <span id="serverPlayers">0/0</span>
            <span id="serverTime">00:00</span>
            <span id="serverWipe">-</span>
          </div>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div>
            <div class="stat-value" id="statOnline">0</div>
            <div class="stat-label">Online</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg></div>
            <div class="stat-value" id="statTeam">0</div>
            <div class="stat-label">Team</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon orange"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
            <div class="stat-value" id="statEvents">0</div>
            <div class="stat-label">Events</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon purple"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg></div>
            <div class="stat-value" id="statShops">0</div>
            <div class="stat-label">Shops</div>
          </div>
        </div>
        
        <div class="dashboard-grid">
          <div class="card">
            <div class="card-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
              Events
            </div>
            <div class="events-list" id="eventsList"></div>
          </div>
          <div class="card">
            <div class="card-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
              Team Chat
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input">
              <input type="text" id="chatInput" placeholder="Message...">
              <button onclick="sendChat()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></button>
            </div>
          </div>
        </div>
      </section>

      <!-- Map Page -->
      <section class="page" id="page-map">
        <div class="map-container">
          <img src="/api/map" alt="Map" id="mapImage">
        </div>
      </section>

      <!-- Team Page -->
      <section class="page" id="page-team">
        <div class="page-header">
          <h1>Team Members</h1>
        </div>
        <div class="team-grid" id="teamGrid"></div>
      </section>

      <!-- Raid Page -->
      <section class="page" id="page-raid">
        <div class="page-header">
          <h1>Raid Calculator</h1>
          <p>Выбери структуру для расчёта</p>
        </div>
        <div class="raid-categories" id="raidCategories"></div>
        <div id="raidResult"></div>
      </section>
    </main>
  </div>

  <div class="toast-container" id="toasts"></div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>
</html>
